<?xml version="1.0" encoding="UTF-8"?>
<FlowConfiguration>

    <id>shapeFile</id>
    <description>Sample injection of sparse shapefiles</description>
    <name>Shapefile</name>

    <workingDirectory>shapeFile</workingDirectory>

    <autorun>true</autorun>

    <EventConsumerConfiguration>
        <id>shape_consumer</id>
        <description>Shapefile packer and sender</description>
        <name>shape_consumer</name>

        <listenerId>ConsumerLogger0</listenerId>
        <listenerId>Cumulator</listenerId>

        <workingDirectory>shapeFile</workingDirectory>
        

        <FileEventRule>
            <optional>false</optional>
            <originalOccurrencies>1</originalOccurrencies>
            <regex>.*\.zip</regex>
            <id>r1</id>
            <description>description</description>
            <name>test</name>
        </FileEventRule>

        <GeoServerActionConfiguration>
            <serviceID>ShapeFileGeoServerService</serviceID>
            <id>step0</id>
            <name>ShapeFileIngestion</name>
            <description>Get a pack of shapefiles (zipped) and ingest them into a GeoServer instance.</description>

	    <listenerId>StatusActionLogger0</listenerId>
            <listenerId>ActionLogger0</listenerId>

            <workingDirectory>shapeFile</workingDirectory>
	    
	    <defaultStyle>polygon</defaultStyle>
	    <crs>EPSG:4326</crs>
	    <envelope/>
	    <dataTransferMethod>EXTERNAL</dataTransferMethod>
	    <wmsPath>/</wmsPath>
	    <defaultNamespace>it.geosolutions</defaultNamespace>

	    <styles/>
            <geoserverPWD>geoserver</geoserverPWD>
            <geoserverUID>admin</geoserverUID>
            <geoserverURL>http://localhost:9090/geoserver</geoserverURL>

	</GeoServerActionConfiguration>
		
    </EventConsumerConfiguration>

    <EventGeneratorConfiguration>
        <id>id</id>
        <name>test</name>
        <description>description</description>
        <serviceID>fsEventGeneratorService</serviceID>
        
        <wildCard>*.*</wildCard>
        <watchDirectory>shapeFile/in</watchDirectory>
        <osType>OS_UNDEFINED</osType>
        <eventType>FILE_ADDED</eventType>
    </EventGeneratorConfiguration>

    <ListenerConfigurations>
    	<StatusProgressListener>
    		<serviceID>statusListenerService</serviceID>
            <id>StatusActionLogger0</id>
    	</StatusProgressListener>
    	
        <LoggingProgressListener>
            <serviceID>loggingListenerService</serviceID>
            <id>ActionLogger0</id>

            <loggerName>it.geosolutions.ActionLogger</loggerName>
        </LoggingProgressListener>

        <LoggingProgressListener>
            <serviceID>loggingListenerService</serviceID>
            <id>ConsumerLogger0</id>

            <loggerName>it.geosolutions.ConsLogger</loggerName>
        </LoggingProgressListener>

        <CumulatingProgressListener>
            <serviceID>cumulatingListenerService</serviceID>
            <id>Cumulator</id>
        </CumulatingProgressListener>

    </ListenerConfigurations>

</FlowConfiguration>
