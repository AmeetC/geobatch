<?xml version="1.0" encoding="UTF-8"?>
<FlowConfiguration>
	<id>geotiff_flow0</id>
	<name>Prepare GeoTIFF and publish</name>
	<description>Create overviews and publish on GeoServer</description>

	<workingDirectory>geotiff_work</workingDirectory>

    <EventConsumerConfiguration>
		<id>geotiff_retile_overview_publish</id>
		<name>dummy</name>
		<description>dummy</description>

		<workingDirectory>geotiff_work</workingDirectory>
		<performBackup>true</performBackup>

		<FileEventRule>
			<optional>false</optional>
			<originalOccurrencies>1</originalOccurrencies>
			<regex>.*\.tif.*</regex>
			<id>r1</id>
			<description>description</description>
			<name>test</name>
		</FileEventRule>

		<GeoTiffOverviewConfiguration>
			<serviceID>geotiffOverviewsEmbedderService</serviceID>
			<id>a1</id>
			<description>description</description>
			<name>test</name>

			<workingDirectory>geotiff_work</workingDirectory>
			<numSteps>8</numSteps>
			<downsampleStep>2</downsampleStep>
			<scaleAlgorithm>nn</scaleAlgorithm>
			<interp>0</interp>
			<tileH>512</tileH>
			<tileW>512</tileW>
		</GeoTiffOverviewConfiguration>

		<GeoServerActionConfiguration>
			<serviceID>geotiffGeoServerGeneratorService</serviceID>
			<id>a1</id>
			<description>description</description>
			<name>test</name>

			<workingDirectory>geotiff_work</workingDirectory>
			<crs>EPSG:4326</crs>
			<envelope/>
			<dataTransferMethod>URL</dataTransferMethod>
			<geoserverPWD>geoserver</geoserverPWD>
			<geoserverUID>admin</geoserverUID>
			<geoserverURL>http://localhost:8080/geoserver</geoserverURL>
			<!-- storeFilePrefix>c41078a</storeFilePrefix -->
			<wmsPath>/</wmsPath>
			<defaultStyle>raster</defaultStyle>
			<styles/>
			<!-- styles>
				<style>raster.sld</style>
			</styles -->
		</GeoServerActionConfiguration>

	</EventConsumerConfiguration>

	<EventGeneratorConfiguration>
		<wildCard>*.*</wildCard>
		<watchDirectory>geotiff_work/in</watchDirectory>
		<osType>OS_UNDEFINED</osType>
		<eventType>FILE_ADDED</eventType>
		<id>id</id>
        <serviceID>fsEventGeneratorService</serviceID>
		<description>description</description>
		<name>test</name>
	</EventGeneratorConfiguration>

</FlowConfiguration>